# Labitbu Maker

This repo is an example of how to create a pathology.

https://github.com/labitbu/pathologies

Pathologies is a fork of `ord` that tracks sats with the following traits (for now). I had to get this up and running quickly to find the sats for the Labitbu collection.

- Starts at block **908,072** (there are earlier pathologies, but this fork just tracks Labitbu pathologies for now)  
- **128-depth** control block data (**4096 bytes**) — this payload appears **after** the `<controlbytes><internalkey>` portion of the control block.  
- Internal key with Labitbu ID (NUMS public key):  
  `96053db5b18967b5a410326ecca687441579225a6d190f398e2180deec6e429e`

You can find the full Labitbu sats index here (or ask me directly). I will have a repo open soon with more info:

https://mempool.space/tx/f08fd61d48f79eeb0c4bc9e58f2d7ecad0e20e5d6411b588590cb0480c8e7fbe

---

https://learnmeabitcoin.com/technical/upgrades/taproot/#script-path-spend-control-block

## How it works

This is inspired by Ademan's [stupid-tap-trick](https://github.com/Ademan/stupid-tap-trick/tree/master).

We entered this as a project for the latest 2025 Miami PlebFi hackathon and everything got a bit out of *control block* since then.

1. **Internal key**  
   Use a SHA-256 hash of `Labitbu` as the internal key.  
   This is a **NUMS key** (Nothing Up My Sleeve) and is provably unspendable:  
   https://nums-secp256k1.jaonoctus.dev/?pk=96053db5b18967b5a410326ecca687441579225a6d190f398e2180deec6e429e&method=TAGGED_HASH_KEY&input=Labitbu

2. **Merkle path payload**  
   Add the WebP image bytes to the Merkle path by splitting them into **32-byte chunks**, 128 times (4096 bytes total).  
   Each chunk is inserted as a sibling hash in the Merkle tree.  
   *Max depth is 128 — this is a Taproot consensus limit.*

3. **Spending**  
   Add one tapscript leaf spend that is revealed when spending the transaction via the **script path**.  
   (Key path spend is not possible due to the NUMS key.)  
   This spend reveals the control block, which contains the internal key and all the sibling hashes — i.e., the embedded WebP data.

4. **Tracking**
   For this metaprotocol, we track the assets the same was as inscriptions, with ordinal theory. via my fork of ord - https://github.com/labitbu/pathologies


### create transaction

1. add a webp file to the root dir of this repo named labitbu.webp (has to be exactly 4096 bytes or under)
2. you might need to change fees, its hardcoded to 1337 rn
3. add a destnation address (ord friendly)

```bash
cargo run "destination_address"
```

## Control Block Example

https://mempool.space/tx/5a15dabc8f0c1656ccd07bd2739f683b4c562fb66487329a41f959c38f0cf7d3

### decode control block back to image

```bash
echo ‘<controlblock>‘ | tr -d '[:space:]' | grep -o -i -m1 '52494646[0-9a-f]*57454250[0-9a-f]*' | cut -c1-8192 | xxd -r -p > control.webp && open control.webp
```

decode labubu from bitcoin
```
cli getrawtransaction "txid" 2 "blockhash" \
| jq -r '.vin[0].txinwitness[2]' \
| tr -d '[:space:]' \
| grep -o -i -m1 '52494646[0-9a-f]*57454250[0-9a-f]*' \
| cut -c1-8192 \
| xxd -r -p > labitbu.webp && open labitbu.webp
```

### inspiration

https://x.com/rot13maxi/status/1921345826800152907

https://github.com/Ademan/stupid-tap-trick/tree/master

https://x.com/rot13maxi/status/1923087628594794800

https://github.com/Ademan/stupid-tap-trick/


### I commented out the annex code but you can also use that if you like 

## Annex example 

### transaction 

https://mempool.space/tx/07e15ad12154d6b47458536858eac9e30ab8fcbab8fe5c8cbc5b895f859ba3d2

### transaction hex
```
02000000000101c528d57436d8fbd17d8e436f93dae688a95b96141ae45e6a6f2543b8566747d20100000000fdffffff010000000000000000066a04f09f91b903015121c1566702a79576a24be297049838c1bd0ab77cde1d1eaa1b7df6431959130d578afdcf0450006956424f5277304b47676f414141414e5355684555674141414751414141434b41514141414142303139494c4141414459456c4551565234326d32565159736452525346543963303461474261566352416b34572b6a2f6d5277677552456263756a433743454f6d65356d4e4d44396839746c45515249492b4235754246647545705751564164454273645939534354626c39333165656971767339645872566c31743137376e336e6e7571514e7476626254374a657552346b7153424241424233676a53515879312f4f504e4a61375555717457733333654a6a756567483878524a6d6938434a58553757674e33784c534e30466e795263464a734d2f5338374d643279763676477644676f382f5a41376955335567795876752b384c6d2b33724f75564d3034435a5a367a68355375616c617676657454764e4a52777a5533585379447337612b563677784c6b475233435737556c433448697161507974386c556c725157344f674444334263756e6a50314a585957334e59586e4a307a76494168324964547a50363871755a4f745066652b326e56397473356650764a484a4f6e675734625a51434f3775516f30657a3263794e4a7735647a375141323938564c6b6d376c66725a6553446c664a45424e6d504b6c7964625a366e4959722b6b6675363064776c453357527462627a6e783675504c4a30634d6549454e482b56495739526a4763336153453255704c32566b55544d714633454778555a64565649526c466e6b7152656a51716d797150523273686b62685661715741305a6f646e355751307251706d2f6b74726f3735554d2f6c4531324742674a316d564a6271462f4b466b5a642b2f31425048306d564249362b426e42647176624241582f65544e7a31306a66533964667966547235777a362f667056396c57727033593175397970565363632f716b576e2b747449446b72745031666a4a527973396a6d3768734f5871767870636575587733656f4a444841345932373754577338344a7575547269374d5930502f76707756332f7755446e52595432446e342f5457586f75676675352f4f4462756d384342797a4a42376e61516265774f445333434d4259466c6a7653423264564b41354d4f6d425668364163734c7744314f55576f69734f796f766341366c6d78774d53456275446978453374636741756f4c36637454676b536c7471527075474e5a4137665276664f31535a65572b34545a333436347050372f4a4672333542446551454a744e766c6454656b665969364b656d386e446675315a746e784d54506672477255705052584b4667575472565875474c54644a6a4c796c443256484d5a48657a596b7239497431446a61534652763266355a4930716a6378713649306169456a4759327470464a525345626c325549715a5a70434b6f6878584752645868755a4d686c4e49536e31422b4337314f7530636333586b75447a42444e457642496a674d634433736938534744654e796c4b386c326d376e346d4e657231316b6e325251743058637167346b7a53336d4c57636f426e2b502f757072495262312f52335437376b7034743072394a56712f563943714b4a49514463586f664b756d3169756e6b4b4658624b4874536b3234795079795a725442386b5462674836683847697372476146654141414141456c46546b5375516d43430a00000000
```

### broadcast with tx-pigeon 

https://github.com/stutxo/tx-pigeon/tree/main

### decode annex back to labitbu
```
echo '50006956424f5277304b47676f414141414e5355684555674141414751414141434b41514141414142303139494c4141414459456c4551565234326d32565159736452525346543963303461474261566352416b34572b6a2f6d5277677552456263756a433743454f6d65356d4e4d44396839746c45515249492b4235754246647545705751564164454273645939534354626c39333165656971767339645872566c31743137376e336e6e7571514e7476626254374a657552346b7153424241424233676a53515879312f4f504e4a61375555717457733333654a6a756567483878524a6d6938434a58553757674e33784c534e30466e795263464a734d2f5338374d643279763676477644676f382f5a41376955335567795876752b384c6d2b33724f75564d3034435a5a367a68355375616c617676657454764e4a52777a5533585379447337612b563677784c6b475233435737556c433448697161507974386c556c725157344f674444334263756e6a50314a585957334e59586e4a307a76494168324964547a50363871755a4f745066652b326e56397473356650764a484a4f6e675734625a51434f3775516f30657a3263794e4a7735647a375141323938564c6b6d376c66725a6553446c664a45424e6d504b6c7964625a366e4959722b6b6675363064776c453357527462627a6e783675504c4a30634d6549454e482b56495739526a4763336153453255704c32566b55544d714633454778555a64565649526c466e6b7152656a51716d797150523273686b62685661715741305a6f646e355751307251706d2f6b74726f3735554d2f6c4531324742674a316d564a6271462f4b466b5a642b2f31425048306d564249362b426e42647176624241582f65544e7a31306a66533964667966547235777a362f667056396c57727033593175397970565363632f716b576e2b747449446b72745031666a4a527973396a6d3768734f5871767870636575587733656f4a444841345932373754577338344a7575547269374d5930502f76707756332f7755446e52595432446e342f5457586f75676675352f4f4462756d384342797a4a42376e61516265774f445333434d4259466c6a7653423264564b41354d4f6d425668364163734c7744314f55576f69734f796f766341366c6d78774d53456275446978453374636741756f4c36637454676b536c7471527075474e5a4137665276664f31535a65572b34545a333436347050372f4a4672333542446551454a744e766c6454656b665969364b656d386e446675315a746e784d54506672477255705052584b4667575472565875474c54644a6a4c796c443256484d5a48657a596b7239497431446a61534652763266355a4930716a6378713649306169456a4759327470464a525345626c325549715a5a70434b6f6878584752645868755a4d686c4e49536e31422b4337314f7530636333586b75447a42444e457642496a674d634433736938534744654e796c4b386c326d376e346d4e657231316b6e325251743058637167346b7a53336d4c57636f426e2b502f757072495262312f52335437376b7034743072394a56712f563943714b4a49514463586f664b756d3169756e6b4b4658624b4874536b3234795079795a725442386b5462674836683847697372476146654141414141456c46546b5375516d43430a' \
| cut -c5- | xxd -p -r | base64 -d > data.png && open data.png
```

### turn png to annex data

```bash
xxd -p labitbu.png | tr -d '\n' | awk '{ printf "%s", $0 } END { for(i=1;i<=8192-length($0);i++) printf "0" }' > controlblock.hex
```

### decode transaction back to labitbu

```
bitcoin-cli getrawtransaction \
  07e15ad12154d6b47458536858eac9e30ab8fcbab8fe5c8cbc5b895f859ba3d2 \
  2 \
  000000000000000000020ccfa33a9b7c37bab179ef31d06cfebec8e14926de2b | \
jq -r '.vin[0].txinwitness[2]' | \
cut -c5- | \
xxd -p -r | \
base64 -d > data.png && open data.png
```
